# 部署说明

1. 在开发用计算机中部署好`git`环境，然后通过使用`git clong`将项目克隆到本地；

   项目克隆地址：`https://gitee.com/trackx/ActivityHelper.git`

2. 修改 `project.config.json` 中的 `appid `替换为自己的 `appid`；

3. 使用微信开发者工具，导入项目；

4. 按照后文中的云函数、云数据库等云开发环境的说明，配置自己的云开发环境；

5. 上传并部署`cloudfunctions`内的所有云函数

6. 在腾讯云·云开发控制台-扩展能力-内容管理页面安装内容管理CMS扩展。

7. 按照步骤安装内容管理平台，并配置管理员和运营者账号及密码

8. 根据管理需求，添加不同的内容管理表；

9. 根据人员配置，添加不同的管理员并分配其权限；

10. 开始使用

## 开发环境说明

调试基础库版本：2.8.1

npm版本：6.14.4

node JS版本：v12.16.3

## 云数据库说明

### 活动表（activity）

| 条目名称     | 字段名称     | 说明              |
| ------------ | ------------ | ----------------- |
| 活动名称     | title        |                   |
| 组织方       | host         |                   |
| 报名人数上限 | numMax       | 可为空            |
| 活动概要     | description  | length <= 500     |
| 活动开始时间 | actTimeBegin | YYYY/MM/DD        |
| 活动结束时间 | actTimeEnd   | YYYY/MM/DD        |
| 报名开始时间 | regTimeBegin | YYYY/MM/DD        |
| 报名结束时间 | regTimeEnd   | YYYY/MM/DD        |
| 封面地址     | cover        | 云存储URL         |
| 活动地址     | addr         |                   |
| 活动类型     | type         | 外键，type表的_id |

### 评论表（comment）

| 条目名称 | 字段名称 | 说明                  |
| -------- | -------- | --------------------- |
| 评论人   | openid   |                       |
| 评论内容 | comment  |                       |
| 评论时间 | time     |                       |
| 活动     | aid      | 外键，activity表的_id |

### 注册信息表（register）

| 条目名称 | 字段名称 | 说明                  |
| -------- | -------- | --------------------- |
| 活动     | aid      | 外键，activity表的_id |
| 报名人   | openid   |                       |

### 用户表（user）

| 条目名称 | 字段名称 | 说明                                    |
| -------- | -------- | --------------------------------------- |
| 用户id   | openid   |                                         |
| 姓名     | name     |                                         |
| 学号     | uid      |                                         |
| 学院     | dep1     |                                         |
| 专业     | dep2     |                                         |
| 手机号码 | tel      |                                         |
| 电子信箱 | email    |                                         |
| 角色     | role     | 2：待确认组织，1：认证组织，0：普通用户 |

### 收藏表（collect）

| 条目名称     | 字段名称 | 说明                |
| ------------ | -------- | ------------------- |
| 用户id       | openid   |                     |
| 活动         | aid      | 外键，activity的_id |

### 分类表（type）

| 条目名称     | 字段名称  | 说明   |
| ------------ | --------- | ------ |
| 分类名称     | type_name |        |
| 分类图标     | type_icon |        |

## 云函数说明

### login

用于获取的基本信息，如用户的openid、小程序的appid、unionid等信息。

### updateActivity

用于更新活动数据表。

## 数据维护指南

可以通过CMS内容管理系统进行数据的检查和修改；

开发过程中也可以通过微信开发者工具的云开发面板进行修改和查看。

## 联系方式

若有问题，可以编写邮件发送至543553697@qq.com，我们收到会尽快回复的。