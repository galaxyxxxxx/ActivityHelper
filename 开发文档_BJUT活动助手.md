# BJUT活动助手开发文档 :)
____

## 前端页面目录
* ### 一级页面
   |   	   |    文件路径   			 | 																		    |
 	|  -----  |    	    --------      |    									--------							 |
   | 主页   |  pages/home/home		  |活动展示 (采用卡片布局 力争简洁清晰) 								   |
   | 发现页  |  pages/discovery/discovery|提供类别和时间两个筛选方式 ;有类别 和 日历 两个顶部tab   |
   | 个人页  |  pages/me/me			  |分为"活动收藏""报名列表""发布管理(仅管理者)"模块	;						 |  
  
* ### 二级页面
	|   		| 		文件路径	   					      | 	入口页面/事件    |							|
 	|  --------	 | 	    --------      					     |    --------		   |   		 --------       |
   | 活动详情页 |	packageA/activityDetail/activityDetail    |	每个活动版块都可以通过点击跳转至详情页|列举活动各项信息;提供报名按钮;可评论(暂不设置回复功能)
   | 个人信息页 | 	packageA/info/info						   |个人页右上角的编辑信息按钮 ;首页右上角的头像|可编辑个人信息;可通过点击身份认证按钮,申请认证活动管理者
   | 新建活动页 | 	packageB/newActivity/newActivity			|个人页的发布管理模块里的加号按钮+||
   | 删改活动页 |	packageB/editActivity/editActivity			|个人页的发布管理模块里 点击某一活动后出现弹出框 选择删改活动||
   | 报名统计页 |	packageB/regDetail/regDetail				|个人页的发布管理模块里 点击某一活动后出现弹出框 选择查看报名||
   | 设置反馈页 | 	packageB/setting/setting					|个人页右上角的设置按钮|可注销帐号;对小程序进行bug反馈;显示小程序的版本信息等
   
注:该小程序采用分包加载(便于提高加载速度),一级页面放在主包里;二级页面放在两个分包packageA和packageB里
   
## 前端页面风格
* ### 页面风格

	 扁平/简洁/多留白
    增加行间距2倍起
    多使用动画达到流畅的切换效果 
    参考ios风格
    宽度100% 高度auto的流式布局
    
* ### 主题色
	  
    背景白色	#ffffff
    普通字体	#000000
    注释字体	#868688
   	 主题颜色   `#80a0c0`
    
* ### 页面边距

	width : `90%`
   margin: 0 auto
   
* ### 字体大小

	一级标题font-size:`50rpx`		 font-weight:`700`
   二级标题font-size:`35rpx` 		font-weight:`600`
   普通文字font-size:`25rpx`		font-weight:`400`
   
 注: 开发者工具中的颜色显示 和手机调试显示的颜色 出入较大
 
 ## 数据库
 * ### 用户信息表 user

|   属性	|  	说明	   |  插入前的校验方法 		 |非空约束|
| ------ |	 --|-- 	 | -------- |
|\_id   |  |  |√|
|\_openid|  |  |√|
|  name  | 姓名 | 由字母或汉字及点组成的1-30位字符串 ||
|  uid  |  学号| 15-21开头的8位数字&查重(待优化) ||
| tel   |  |  通用的手机号正则校验||
| email  |  |  通用的邮箱正则校验||
| dep1  |  院|  通过选择器输入数据 无需校验||
| dep2  |  系|  通过选择器输入数据 无需校验||
| org  |  部门(only for 活动管理者) |1-30位字符|√|
| role  |  角色 |  无需校验||

\- 与该表相关的操作 -
用户第一次onload该小程序时,user表不记录该用户信息;
若用户未进入过个人信息页修改信息,就点击收藏某活动,则以获取到的openid,记录在user表中,其他属性暂不设置;
若用户未进入过个人信息页修改信息,就点击报名某活动,则跳转至个人信息页,让该用户进行报名;
修改个人信息后点击提交,会更新user表中对应用户的数据;
点击申请认证按钮,需输入所属部门,再更新user表中对应用户的role值为2;
已认证的用户点击申请按钮,会弹窗提醒"您已是活动发布者,无需再次申请",user表无任何修改;
在设置页选择注销信息,user表删除对应用户信息;

 注: 
 role属性用于记录用户角色,有三个可取值。0表示普通学生,1表示已认证的活动管理者,2表示正在申请认证中。
 
 
 
 * ### 活动信息表 activity

|   属性		 |  	说明	   					|  插入前的校验方法 		 |非空约束|
| ------ 		|	 ---- 	 					  | ------|-- |
|\_id   	   |  								|  										 |√|
|\_openid		| 发布者openid					   |  							  		   |√|
|  title  		| 活动名称 						  |  1-30位字符		 		  			||
|  host  		| 承办部门						  |  								 	   |√|
| type   	   | 类型标签 						|  通过选择器输入数据 无需校验 			||
| numMax  		|  人数限制 					  |  正整数								||
| addr  		|  地点		 					|  通过选择器输入数据 无需校验			||
| actTimeBegin  |  活动开始时间					|  通过选择器输入数据 无需校验			|√|
| actTimeEnd   |  活动截至时间					|  										||
| regTimeBegin  |  报名开始时间					 |  早于活动截止时间					 ||
| regTimeEnd   |  报名截至时间					|  早于活动截止时间						||
| intro       |  活动介绍					   |  <500字								  |√|
| cover 		|  活动封面图					|  对图片大小及比例进行检验(需小于云存储可达的最大文件大小)	||
| link  		|  活动相关链接(仅能放一条) 	  |  			||

注:
host 属性 活动承办部门,默认为发布者所属部门
intro属性 活动介绍,用户输入时可采用富文本编辑器编辑


 * ### 活动报名表 register
 
 |   属性		 |  	说明		 |  插入前的校验方法   |非空约束|
| ------ 		|	 ---- 	 	  | ----|---- 			|
|\_id   	   |  				|  					  |√|
|  openid		| 报名者openid	  |				  		 |√|
|  aid  		| 活动id 			| 	 		  		  |√|
 
 
 * ### 活动收藏表 collect
 
  |   属性		 |  	说明		 |  插入前的校验方法   |非空约束|
| ------ 		|	 ---- 	 	  | -----|--- 			|
|\_id   	   |  				|  					  |√|
|  openid		| 收藏者openid	  |				  		 |√|
|  aid  		| 活动id 			| 	 		  		  |√|
 
 * ### 活动评论表 comment
 
|   属性		 |  	说明		 |  插入前的校验方法   |非空约束|
| ------ 		|	 ---- 	 	  | -----|--- 			|
|\_id   	   |  				|  					  |√|
|  openid		| 评论者openid	  |				  		 |√|
|  aid  		| 活动id 		   | 	 		  		  |√|
| comment    | 评论内容 		| |√|
| time | 评论时间 | |√|


	



	